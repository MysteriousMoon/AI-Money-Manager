import { useStore } from '@/lib/store';

type Language = 'en' | 'zh';

const dictionaries: Record<Language, Record<string, string>> = {
    en: {
        'nav.home': 'Home',
        'nav.reports': 'Reports',
        'nav.recurring': 'Recurring',
        'nav.investments': 'Investments',
        'nav.transactions': 'List',
        'nav.accounts': 'Accounts',
        'nav.settings': 'Settings',
        'nav.more': 'More',

        'dashboard.title': 'Overview',
        'dashboard.balance': 'Cash Savings',
        'dashboard.invested': 'Invested',
        'dashboard.total_expenses': 'Total Expenses',
        'dashboard.total_income': 'Total Income',
        'dashboard.income': 'This Month Income',
        'dashboard.spending': 'This Month Spending',
        'dashboard.vs_last_month': 'vs last month',
        'dashboard.manual_add': 'Manual Add',
        'dashboard.scan_receipt': 'Scan Receipt',
        'dashboard.recent_transactions': 'Recent Transactions',
        'dashboard.view_all': 'View All',
        'dashboard.no_transactions': 'No transactions yet. Start by adding one!',

        'add.title': 'Add Transaction',
        'add.manual': 'Manual',
        'add.scan': 'Scan',
        'add.amount': 'Amount',
        'add.date': 'Date',
        'add.category': 'Category',
        'add.merchant': 'Merchant',
        'add.note': 'Note',
        'add.save': 'Save Transaction',

        'add.take_photo': 'Take a photo or upload',
        'add.upload_receipt': 'Upload Receipt',
        'add.upload_desc': 'Upload a receipt to automatically extract details.',
        'add.select_image': 'Select Image',
        'add.scanned': 'Receipt Scanned',

        'reports.title': 'Reports',
        'reports.desc': 'Analyze your spending habits.',
        'reports.by_category': 'Expenses by Category',
        'reports.trend': 'Spending Trend (Last 7 Days)',
        'reports.view_mode': 'View Mode',
        'reports.view.operating': 'Operating (P&L)',
        'reports.view.cash_flow': 'Cash Flow',
        'reports.view.operating_desc': 'Shows depreciation as expense. Best for tracking true cost of living.',
        'reports.view.cash_flow_desc': 'Shows asset purchases as expense. Best for tracking cash balance.',
        'reports.capex': 'Capital Expenditure',
        'reports.financial_dashboard': 'Financial Dashboard',
        'reports.range.daily': 'Daily',
        'reports.range.weekly': 'Weekly',
        'reports.range.monthly': 'Monthly',
        'reports.range.yearly': 'Yearly',
        'common.income': 'Income',
        'common.expense': 'Expense',

        'add.scan_text_label': 'Transaction Details',
        'add.scan_text_placeholder': 'Describe the transaction (e.g., "Lunch $15") or paste text...',
        'add.scan_image_label': 'Upload Image (Optional)',
        'add.scan_button': 'Scan',
        'add.analyzing': 'Analyzing...',
        'add.account': 'Account',
        'add.from_account': 'From Account',
        'add.transfer_to': 'Transfer To',
        'add.target_amount': 'Target Amount',
        'add.fee': 'Fee',
        'add.select_account': 'Select Account',
        'add.currency': 'Currency',

        'recurring.title': 'Recurring Rules',
        'recurring.desc': 'Manage subscriptions and fixed expenses.',
        'recurring.add_button': 'Add Recurring Bill',
        'recurring.add_rule': 'Add Rule',
        'recurring.next_payment': 'Next Payment',
        'recurring.active': 'Active',
        'recurring.inactive': 'Inactive',
        'recurring.frequency.weekly': 'Weekly',
        'recurring.frequency.monthly': 'Monthly',
        'recurring.frequency.yearly': 'Yearly',

        // Investments
        'investments.title': 'Investments',
        'investments.desc': 'Track your portfolio and assets.',
        'investments.add': 'Add Investment',
        'investments.total_value': 'Total Value',
        'investments.total_profit': 'Total Profit/Loss',
        'investments.name': 'Name',
        'investments.type': 'Type',
        'investments.initial_amount': 'Initial Amount',
        'investments.current_value': 'Current Value',
        'investments.interest_rate': 'Interest Rate (%)',
        'investments.start_date': 'Start Date',
        'investments.end_date': 'End Date (Optional)',
        'investments.note': 'Note',
        'investments.cancel': 'Cancel',
        'investments.update': 'Update',
        'investments.delete_confirm': 'Are you sure you want to delete this investment?',
        'investments.empty': 'No investments yet. Start building your portfolio!',
        'investments.return': 'Return',
        'investments.current_est': 'Current / Est.',
        'investments.initial': 'Initial',
        'investments.type.stock': 'Stock/Fund',
        'investments.type.deposit': 'Fixed Deposit',
        'investments.type.fund': 'Mutual Fund',
        'investments.type.other': 'Other',
        'investments.redeem': 'Redeem / Close',
        'investments.redeem_title': 'Redeem Investment',
        'investments.redeem_desc': 'Close this investment and record the return.',
        'investments.final_amount': 'Final Amount',
        'investments.deduct_notice': 'This will be recorded as an EXPENSE transaction.',
        'investments.return_notice': 'This will be recorded as an INCOME transaction.',
        'investments.confirm_redeem': 'Confirm Redeem',
        'investments.type.asset': 'Fixed Asset',
        'investments.purchase_price': 'Purchase Price',
        'investments.useful_life': 'Useful Life (Years)',
        'investments.salvage_value': 'Salvage Value',
        'investments.depreciation_method': 'Depreciation Method',
        'investments.straight_line': 'Straight-Line',
        'investments.declining_balance': 'Declining Balance',
        'investments.book_value': 'Book Value',
        'investments.accumulated_depreciation': 'Accumulated Depreciation',
        'investments.remaining_life': 'Remaining Life',
        'investments.transfer_notice': 'Funds will be transferred from your selected account to your Investment Portfolio.',
        'investments.redeem_transfer_notice': 'Principal will be returned to your account. Profit/Loss will be recorded separately.',
        'investments.update_value': 'Update Value',
        'investments.update_value_title': 'Update Market Value',
        'investments.record_depreciation': 'Record Depreciation',
        'investments.depreciation_transfer_notice': 'This will be recorded as a Transfer to Fixed Assets. Net Worth remains unchanged.',
        'investments.depreciation_amount': 'Depreciation Amount',
        'investments.depreciation_date': 'Depreciation Date',
        'investments.last_depreciated': 'Last Depreciated',
        'investments.depreciation_confirm': 'Record Expense',

        'recurring.update': 'Update',
        'recurring.cancel': 'Cancel',
        'recurring.name': 'Name',
        'recurring.frequency': 'Frequency',
        'recurring.start_date': 'Start Date',
        'recurring.next': 'Next',
        'recurring.empty': 'No recurring bills set up yet.',
        'recurring.scan_text_label': 'Recurring Bill Details',
        'recurring.scan_text_placeholder': 'Describe the recurring bill (e.g., "Netflix $15/month")...',

        'settings.title': 'Settings',
        'settings.desc': 'Configure AI and application preferences.',
        'settings.ai_config': 'AI Configuration',
        'settings.base_url': 'Base URL',
        'settings.api_key': 'OpenAI API Key',
        'settings.model': 'Model Name',
        'settings.system_prompt': 'System Prompt',
        'settings.currency_loc': 'Currency & Localization',
        'settings.base_currency': 'Base Currency',
        'settings.language': 'Language',
        'settings.exchange_api_key': 'Exchange Rate API Key',
        'settings.manage_categories': 'Manage Categories',
        'settings.save': 'Save Settings',
        'settings.saved': 'Saved!',
        'settings.account_preferences': 'Account Preferences',
        'settings.default_account': 'Default Payment Account',
        'settings.none': 'None',
        'settings.default_account_help': 'Used by AI when no account is specified.',
        'settings.theme': 'Theme',
        'settings.theme.light': 'Light',
        'settings.theme.dark': 'Dark',
        'settings.theme.system': 'System',
        'settings.api_key_help': 'Stored locally in your browser.',
        'settings.exchange_key_placeholder': 'ExchangeRate-API Key',

        'categories.title': 'Categories',
        'categories.desc': 'Manage your expense and income categories.',
        'categories.add_new': 'Add New Category',
        'categories.type': 'Type',
        'categories.icon': 'Icon',

        'transactions.title': 'Transactions',
        'transactions.desc': 'View and manage your transaction history.',
        'transactions.empty': 'No transactions found.',
        'transactions.confirm_delete': 'Are you sure you want to delete this transaction?',
        'transactions.date_format': 'MMMM d, yyyy',

        'settings.data_management': 'Data Management',
        'settings.manage_categories_desc': 'Edit, add, or remove transaction categories',
        'settings.sign_out': 'Sign Out',

        'auth.login': 'Log In',
        'auth.email_placeholder': 'Email',
        'auth.password_placeholder': 'Password',
        'auth.logging_in': 'Logging in...',
        'auth.dont_have_account': "Don't have an account?",
        'auth.sign_up': 'Sign Up',
        'auth.create_account': 'Create your account',
        'auth.email_label': 'Email address',
        'auth.name_label': 'Full Name',
        'auth.creating_account': 'Creating account...',
        'auth.already_have_account': 'Already have an account?',

        'transactions.edit': 'Edit Transaction',
        'transactions.update': 'Update',
        'transactions.cancel_edit': 'Cancel',
        'transactions.export': 'Export CSV',

        'accounts.title': 'Accounts',
        'accounts.desc': 'Manage your bank cards and wallets',
        'accounts.add': 'Add Account',
        'accounts.edit_title': 'Edit Account',
        'accounts.new_title': 'New Account',
        'accounts.name': 'Account Name',
        'accounts.name_placeholder': 'e.g. Chase Bank',
        'accounts.type': 'Type',
        'accounts.initial_balance': 'Initial Balance',
        'accounts.currency': 'Currency',
        'accounts.icon': 'Icon',
        'accounts.color': 'Color',
        'accounts.create': 'Create Account',
        'accounts.update': 'Update Account',
        'accounts.cancel': 'Cancel',
        'accounts.current_balance': 'Current Balance',
        'accounts.default': 'Default',
        'accounts.no_accounts': 'No accounts yet. Create one to get started!',
        'accounts.delete_confirm': 'Are you sure you want to delete this account?',
        'accounts.type.bank': 'Bank Account',
        'accounts.type.digital_wallet': 'Digital Wallet',
        'accounts.type.cash': 'Cash',
        'accounts.type.credit_card': 'Credit Card',
        'accounts.type.investment': 'Investment',
        'accounts.type.other': 'Other',
    },
    zh: {
        'nav.home': '首页',
        'nav.reports': '报表',
        'nav.recurring': '周期',
        'nav.investments': '投资',
        'nav.transactions': '明细',
        'nav.accounts': '账户',
        'nav.settings': '设置',
        'nav.more': '更多',

        'dashboard.title': '概览',
        'dashboard.balance': '现金存款',
        'dashboard.invested': '已投资',
        'dashboard.total_expenses': '总支出',
        'dashboard.total_income': '总收入',
        'dashboard.income': '本月收入',
        'dashboard.spending': '本月支出',
        'dashboard.vs_last_month': '相比上月',
        'dashboard.manual_add': '手动记账',
        'dashboard.scan_receipt': '扫描小票',
        'dashboard.recent_transactions': '近期交易',
        'dashboard.view_all': '查看全部',
        'dashboard.no_transactions': '暂无交易，快去记一笔吧！',

        'add.title': '记一笔',
        'add.manual': '手动',
        'add.scan': '扫描',
        'add.amount': '金额',
        'add.target_amount': '对方实收',
        'add.fee': '手续费',
        'add.date': '日期',
        'add.category': '分类',
        'add.merchant': '商家',
        'add.note': '备注',
        'add.save': '保存交易',

        'add.take_photo': '拍照或上传',
        'add.upload_receipt': '上传小票',
        'add.upload_desc': '上传小票自动识别详情。',
        'add.select_image': '选择图片',
        'add.scanned': '已扫描小票',

        'reports.title': '统计报表',
        'reports.desc': '分析您的消费习惯。',
        'reports.by_category': '分类支出占比',
        'reports.trend': '近7天消费趋势',
        'reports.view_mode': '视图模式',
        'reports.view.operating': '经营视图 (损益)',
        'reports.view.cash_flow': '现金流视图',
        'reports.view.operating_desc': '显示折旧支出。适合追踪真实生活成本。',
        'reports.view.cash_flow_desc': '显示资产购买支出。适合追踪现金余额。',
        'reports.capex': '资本性支出',
        'reports.financial_dashboard': '财务仪表盘',
        'reports.range.daily': '日',
        'reports.range.weekly': '周',
        'reports.range.monthly': '月',
        'reports.range.yearly': '年',
        'common.income': '收入',
        'common.expense': '支出',

        'add.scan_text_label': '交易详情',
        'add.scan_text_placeholder': '描述交易内容（如“午饭 15元”）或粘贴文本...',
        'add.scan_image_label': '上传图片（可选）',
        'add.scan_button': '开始识别',
        'add.analyzing': '正在分析...',
        'add.account': '账户',
        'add.from_account': '转出账户',
        'add.transfer_to': '转入账户',

        'add.select_account': '选择账户',
        'add.currency': '货币',

        'recurring.title': '周期账单',
        'recurring.desc': '管理订阅和固定支出。',
        'recurring.add_button': '添加周期账单',
        'recurring.add_rule': '添加规则',
        'recurring.update': '更新',
        'recurring.cancel': '取消',
        'recurring.name': '名称',
        'recurring.frequency': '频率',
        'recurring.start_date': '开始日期',
        'recurring.next': '下次',
        'recurring.empty': '暂无周期账单。',
        'recurring.frequency.weekly': '每周',
        'recurring.frequency.monthly': '每月',
        'recurring.frequency.yearly': '每年',
        'recurring.scan_text_label': '周期账单详情',
        'recurring.scan_text_placeholder': '描述周期账单（如“Netflix 15元/月”）...',

        // Investments
        'investments.title': '投资组合',
        'investments.desc': '追踪您的投资资产。',
        'investments.add': '添加投资',
        'investments.total_value': '总资产',
        'investments.total_profit': '总盈亏',
        'investments.name': '名称',
        'investments.type': '类型',
        'investments.initial_amount': '初始金额',
        'investments.current_value': '当前价值',
        'investments.interest_rate': '年化利率 (%)',
        'investments.start_date': '开始日期',
        'investments.end_date': '结束日期 (选填)',
        'investments.note': '备注',
        'investments.cancel': '取消',
        'investments.update': '更新',
        'investments.delete_confirm': '确定要删除这项投资吗？',
        'investments.empty': '暂无投资。开始构建您的投资组合吧！',
        'investments.return': '收益',
        'investments.current_est': '当前 / 预估',
        'investments.initial': '本金',
        'investments.type.stock': '股票/基金',
        'investments.type.deposit': '定期存款',
        'investments.type.fund': '理财产品',
        'investments.type.other': '其他投资',
        'investments.redeem': '赎回 / 结清',
        'investments.redeem_title': '赎回投资',
        'investments.redeem_desc': '结清此项投资并记录收益。',
        'investments.final_amount': '最终金额',
        'investments.deduct_notice': '这将记录为一笔支出交易。',
        'investments.return_notice': '这将记录为一笔收入交易。',
        'investments.confirm_redeem': '确认赎回',
        'investments.type.asset': '固定资产',
        'investments.purchase_price': '购买价格',
        'investments.useful_life': '使用年限 (年)',
        'investments.salvage_value': '残值',
        'investments.depreciation_method': '折旧方法',
        'investments.straight_line': '直线法',
        'investments.declining_balance': '余额递减法',
        'investments.book_value': '账面价值',
        'investments.accumulated_depreciation': '累计折旧',
        'investments.remaining_life': '剩余年限',
        'investments.transfer_notice': '资金将从您选择的账户转入投资组合账户。',
        'investments.redeem_transfer_notice': '本金将退回到您的账户。盈亏将单独记录。',
        'investments.update_value': '更新市值',
        'investments.update_value_title': '更新市场价值',
        'investments.record_depreciation': '记录折旧',
        'investments.depreciation_transfer_notice': '这将记录为转账到固定资产。净资产保持不变。',
        'investments.depreciation_amount': '折旧金额',
        'investments.depreciation_date': '折旧日期',
        'investments.last_depreciated': '上次折旧',
        'investments.depreciation_confirm': '记录费用',
        'investments.account': '资金账户',
        'investments.amount': '投资金额',
        'investments.rate': '预期收益率 (%)',
        'investments.depreciation_type': '折旧类型',

        'settings.title': '设置',
        'settings.desc': '配置 AI 和应用偏好。',
        'settings.ai_config': 'AI 配置',
        'settings.base_url': '接口地址 (Base URL)',
        'settings.api_key': 'OpenAI API Key',
        'settings.model': '模型名称',
        'settings.system_prompt': '系统提示词',
        'settings.currency_loc': '货币与本地化',
        'settings.base_currency': '本位币',
        'settings.language': '语言',
        'settings.exchange_api_key': '汇率 API Key',
        'settings.manage_categories': '管理分类',
        'settings.save': '保存设置',
        'settings.saved': '已保存！',
        'settings.account_preferences': '账户偏好',
        'settings.default_account': '默认支付账户',
        'settings.none': '无',
        'settings.default_account_help': '当未指定账户时 AI 将使用此账户。',
        'settings.theme': '主题',
        'settings.theme.light': '浅色',
        'settings.theme.dark': '深色',
        'settings.theme.system': '跟随系统',
        'settings.api_key_help': '存储在本地浏览器中。',
        'settings.exchange_key_placeholder': 'ExchangeRate-API Key',
        'settings.data_management': '数据管理',
        'settings.manage_categories_desc': '编辑、添加或删除交易分类',
        'settings.sign_out': '退出登录',

        'auth.login': '登录',
        'auth.email_placeholder': '邮箱',
        'auth.password_placeholder': '密码',
        'auth.logging_in': '登录中...',
        'auth.dont_have_account': '还没有账号？',
        'auth.sign_up': '注册',
        'auth.create_account': '创建账号',
        'auth.email_label': '邮箱地址',
        'auth.name_label': '全名',
        'auth.creating_account': '创建中...',
        'auth.already_have_account': '已有账号？',
        'categories.title': '分类管理',
        'categories.desc': '管理您的支出和收入分类。',
        'categories.add_new': '添加新分类',
        'categories.type': '类型',
        'categories.icon': '图标',

        'transactions.title': '交易列表',
        'transactions.desc': '查看和管理您的交易记录。',
        'transactions.empty': '暂无交易记录。',
        'transactions.confirm_delete': '确定要删除这条交易吗？',
        'transactions.date_format': 'yyyy年M月d日',

        'transactions.edit': '编辑交易',
        'transactions.update': '更新',
        'transactions.cancel_edit': '取消',
        'transactions.export': '导出 CSV',

        'accounts.title': '账户管理',
        'accounts.desc': '管理您的银行卡和钱包。',
        'accounts.add': '添加账户',
        'accounts.edit_title': '编辑账户',
        'accounts.new_title': '新建账户',
        'accounts.name': '账户名称',
        'accounts.name_placeholder': '例如：招商银行',
        'accounts.type': '类型',
        'accounts.initial_balance': '初始余额',
        'accounts.currency': '货币',
        'accounts.icon': '图标',
        'accounts.color': '颜色',
        'accounts.create': '创建账户',
        'accounts.update': '更新账户',
        'accounts.cancel': '取消',
        'accounts.current_balance': '当前余额',
        'accounts.default': '默认',
        'accounts.no_accounts': '暂无账户，创建一个开始记账吧！',
        'accounts.delete_confirm': '确定要删除这个账户吗？',
        'accounts.type.bank': '银行账户',
        'accounts.type.digital_wallet': '数字钱包',
        'accounts.type.cash': '现金',
        'accounts.type.credit_card': '信用卡',
        'accounts.type.investment': '投资账户',
        'accounts.type.other': '其他',
    }
};

export function useTranslation() {
    const { settings } = useStore();
    const language = settings.language || 'en';

    const t = (key: string) => {
        return dictionaries[language][key] || key;
    };

    return { t, language };
}
